<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets">
                	
			<h:form>
					<h:dataTable rendered="#{not empty productBean.products}"
								 value="#{productBean.products}" 
								 var="prod" 
								 border="1">
							<f:facet name="header">
								<h:outputText value="All products" />
							</f:facet>
						<h:column>
							<f:facet name="header">
								<h:outputText value="#" />
							</f:facet>
							<h:outputText value="#{prod.id}" />
						</h:column>
						<h:column>
							<f:facet name="header">
								<h:outputText value="name" />
							</f:facet>
							<h:outputText value="#{prod.name}" />
						</h:column>
						<h:column>
							<f:facet name="header">
								<h:outputText value="price" />
							</f:facet>
							<h:outputText value="#{prod.unitCost}" />
						</h:column>
						<h:column>
							<f:facet name="header">
								<h:outputText value="category" />
							</f:facet>
							<h:outputText value="#{prod.category.name}" />
						</h:column>
						<h:column>
							<f:facet name="header">
								<h:outputText value="action" />
							</f:facet>
							<h:commandButton value="select" >
								<f:setPropertyActionListener target="#{productBean.product}" value="#{prod}" />
								<f:setPropertyActionListener target="#{productBean.selectedCategoryId}" value="#{prod.category.id}" />
								<f:setPropertyActionListener target="#{productBean.formDisplayed}" value="true" />
							</h:commandButton>
						</h:column>
					</h:dataTable>
				</h:form>
				<h:form>
					<h:commandButton value="new" action="#{productBean.doNew}" />
				</h:form>
			
</ui:composition>